<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏</title>
    <script>
        // –ò–º–∏—Ç–∏—Ä—É–µ–º –æ–±—ä–µ–∫—Ç ERRORS –∏–∑ main.js
        const ERRORS = {
            'user_exists': '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–æ–π –ø–æ—á—Ç–æ–π —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç',
            'account_already_verified': '–ü–æ—á—Ç–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ —É–∂–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞',
            '–ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π –∏–ª–∏ –∏—Å—Ç–µ–∫—à–∏–π —Ç–æ–∫–µ–Ω': '–¢–æ–∫–µ–Ω –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∏–ª–∏ –∏—Å—Ç–µ–∫. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø—Ä–æ—Å–∏—Ç–µ –Ω–æ–≤–æ–µ –ø–∏—Å—å–º–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.',
        };

        // –ò–º–∏—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é verifyUser
        async function testVerifyUser(token) {
            console.log('üîç –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω:', token);
            
            try {
                const resp = await fetch('https://portaldata.ru/api/v1/user/verify', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ token })
                });

                const data = await resp.json();
                console.log('üì° –û—Ç–≤–µ—Ç –æ—Ç API:', data);

                if (data.code === 200) {
                    console.log('‚úÖ –£—Å–ø–µ—Ö:', data.message);
                    return { success: true, message: data.message };
                } else if (data.code === 310) {
                    const errorMessage = ERRORS[data.message] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∑–∂–µ';
                    console.log('‚ùå –û—à–∏–±–∫–∞:', errorMessage);
                    return { success: false, message: errorMessage, code: data.code };
                }
            } catch (error) {
                console.error('üö® –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:', error);
                return { success: false, message: '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message };
            }
        }

        // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
        async function runTests() {
            console.log('üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏...');
            
            // –¢–µ—Å—Ç 1: –ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
            console.log('\n--- –¢–µ—Å—Ç 1: –ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω ---');
            const result1 = await testVerifyUser('invalid_token');
            document.getElementById('test1-result').textContent = JSON.stringify(result1, null, 2);
            
            // –¢–µ—Å—Ç 2: –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω (–µ—Å–ª–∏ –µ—Å—Ç—å)
            console.log('\n--- –¢–µ—Å—Ç 2: –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω ---');
            const result2 = await testVerifyUser('71994fe091f766ebf095ccc7480a5b52cfc8bbf8e2104d9f89daa4d6fd2cd01c');
            document.getElementById('test2-result').textContent = JSON.stringify(result2, null, 2);
        }
    </script>
</head>
<body>
    <h1>–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏</h1>
    
    <h2>–¢–µ—Å—Ç 1: –ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω</h2>
    <pre id="test1-result">–û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞...</pre>
    
    <h2>–¢–µ—Å—Ç 2: –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω</h2>
    <pre id="test2-result">–û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞...</pre>
    
    <button onclick="runTests()">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã</button>
    
    <script>
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', runTests);
    </script>
</body>
</html>
